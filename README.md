[ç®€ä½“ä¸­æ–‡](./README.md) | [English](./README.en.md)

# NewTube - ç°ä»£åŒ–è§†é¢‘åˆ†äº«å¹³å°

<p align="center">
  <img src="https://img.shields.io/badge/Next.js-15.1-blue" alt="Next.js">
  <img src="https://img.shields.io/badge/React-19.0-cyan" alt="React">
  <img src="https://img.shields.io/badge/TypeScript-5.0-blue" alt="TypeScript">
  <img src="https://img.shields.io/badge/tRPC-11.0-purple" alt="tRPC">
  <img src="https://img.shields.io/badge/Drizzle-0.44-green" alt="Drizzle">
  <img src="https://img.shields.io/badge/License-MIT-yellow" alt="License">
</p>

<p align="center">
  <strong>åŸºäº Next.js 15 + tRPC + Drizzle å…¨æ ˆæ¶æ„çš„ä¼ä¸šçº§è§†é¢‘å¹³å°</strong>
</p>
<p align="center">
  é‡‡ç”¨ <strong>ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ + æ¨¡å—åŒ–</strong> æ¶æ„æ¨¡å¼ï¼Œå®ç° <strong>é«˜æ€§èƒ½è§†é¢‘å¤„ç† & å®æ—¶äº’åŠ¨</strong>ï¼Œ
  <br>å‰ç«¯ <code>Next.js 15/React 19/Tailwind CSS/Radix UI</code>ï¼Œåç«¯ <code>tRPC/Drizzle ORM/PostgreSQL</code>ï¼Œ
  <br>é€šè¿‡ <strong>Mux è§†é¢‘å¤„ç† + Clerk è®¤è¯ + Upstash ç¼“å­˜</strong> å®ç°è§†é¢‘æœåŠ¡ã€‚
</p>


## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### ğŸ’¡ æŠ€æœ¯äº®ç‚¹

- **ğŸ—ï¸ ç°ä»£åŒ–å…¨æ ˆæ¶æ„** - Next.js 15 App Router + Server Componentsï¼Œå®ç° SSR/SSG æœ€ä½³å®è·µ
- **âš¡ ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨** - tRPC + Zod + TypeScriptï¼Œä»æ•°æ®åº“åˆ°å‰ç«¯çš„å®Œæ•´ç±»å‹æ¨å¯¼
- **ğŸ“± é«˜æ€§èƒ½è§†é¢‘å¤„ç†** - Mux ä¸“ä¸šè§†é¢‘ç¼–ç ï¼Œè‡ªåŠ¨ç”Ÿæˆå¤šåˆ†è¾¨ç‡ï¼Œæ”¯æŒè‡ªé€‚åº”æµåª’ä½“
- **ğŸ”„ å®æ—¶çŠ¶æ€åŒæ­¥** - React Query + tRPC subscriptionsï¼Œè§†é¢‘æ’­æ”¾è¿›åº¦ã€è¯„è®ºã€ç‚¹èµå®æ—¶åŒæ­¥
- **ğŸ¯ æ¨¡å—åŒ–æ¶æ„è®¾è®¡** - åŠŸèƒ½æ¨¡å—ç‹¬ç«‹å°è£…ï¼Œserver/ui/types æ¸…æ™°åˆ†å±‚ï¼Œæ˜“ç»´æŠ¤æ‰©å±•
- **ğŸ“š æ™ºèƒ½æ¨èç®—æ³•** - åŸºäºç”¨æˆ·è¡Œä¸ºçš„è§†é¢‘æ¨èï¼Œè®¢é˜…å†…å®¹ä¼˜å…ˆï¼Œä¸ªæ€§åŒ–é¦–é¡µ
- **ğŸ–¼ï¸ æ™ºèƒ½åª’ä½“ä¼˜åŒ–** - UploadThing æ–‡ä»¶ä¸Šä¼ ï¼Œè‡ªåŠ¨ç¼©ç•¥å›¾ç”Ÿæˆï¼ŒWebP æ ¼å¼ä¼˜åŒ–
- **ğŸ”’ æƒé™å®‰å…¨è®¤è¯** - Clerk å¤šå› ç´ è®¤è¯ï¼ŒJWT + æ•°æ®åº“ä¼šè¯ï¼Œç»†ç²’åº¦æƒé™æ§åˆ¶

### ğŸ¨ ç”¨æˆ·ä½“éªŒ

- **ğŸ“– æ²‰æµ¸å¼è§†é¢‘æ’­æ”¾** - Mux Player ä¸“ä¸šæ’­æ”¾å™¨ï¼Œæ”¯æŒ 4Kã€å­—å¹•ã€å¤šéŸ³è½¨
- **ğŸŒ™ å“åº”å¼è®¾è®¡** - Mobile-first è®¾è®¡ï¼Œæ”¯æŒ PWAï¼Œæ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- **âš™ï¸ åˆ›ä½œè€…å·¥ä½œå®¤** - è§†é¢‘ä¸Šä¼ ã€ç¼–è¾‘ã€æ•°æ®åˆ†æã€æ”¶ç›Šç®¡ç†ä¸€ç«™å¼å¹³å°
- **ğŸ” æ™ºèƒ½æœç´¢ç³»ç»Ÿ** - å…¨æ–‡æœç´¢ã€åˆ†ç±»ç­›é€‰ã€çƒ­é—¨æ¨èã€æœç´¢å†å²
- **ğŸ­ æµç•…äº¤äº’åŠ¨ç”»** - Framer Motion åŠ¨ç”»ï¼Œéª¨æ¶å±åŠ è½½ï¼Œä¼˜åŒ–çš„ç”¨æˆ·ä½“éªŒ

### ğŸ”§ æŠ€æœ¯æ¶æ„

- **å…¨æ ˆç±»å‹å®‰å…¨** - `tRPC` â†” `Next.js API Routes`ï¼Œç»Ÿä¸€ `/api/trpc/[trpc]` ç«¯ç‚¹
- **æ•°æ®åº“ & ORM** - `Drizzle ORM + Neon PostgreSQL`ï¼Œç±»å‹å®‰å…¨çš„ SQLï¼Œè‡ªåŠ¨è¿ç§»
- **çŠ¶æ€ç®¡ç†** - `TanStack Query + tRPC`ï¼ŒæœåŠ¡ç«¯çŠ¶æ€ç¼“å­˜ï¼Œä¹è§‚æ›´æ–°ï¼Œç¦»çº¿æ”¯æŒ
- **æ–‡ä»¶å­˜å‚¨** - `UploadThing + Mux`ï¼ŒCDN åŠ é€Ÿï¼Œå¤šåŒºåŸŸéƒ¨ç½²ï¼Œæ™ºèƒ½å‹ç¼©
- **æ€§èƒ½ & ç›‘æ§** - `Next.js Analytics + Vercel Insights`ï¼ŒCore Web Vitals ç›‘æ§

## ğŸ“± åŠŸèƒ½å±•ç¤º

### âœ… å‰ç«¯å®ç° (Next.js + React)

| æ¨¡å— | åŠŸèƒ½ç‰¹æ€§ | æŠ€æœ¯å®ç° |
|------|----------|----------|
| **ğŸ  é¦–é¡µ** | SSR + ISR æ¶æ„ï¼Œæ— é™æ»šåŠ¨ï¼Œè§†é¢‘é¢„è§ˆï¼Œåˆ†ç±»ç­›é€‰ï¼Œçƒ­é—¨æ¨è | `page.tsx` + `InfiniteScroll` + `tRPC.videos.getMany` |
| **ğŸ“– è§†é¢‘è¯¦æƒ…** | åŠ¨æ€è·¯ç”±ï¼Œæ’­æ”¾å™¨é›†æˆï¼Œç›¸å…³æ¨èï¼Œè¯„è®ºç³»ç»Ÿï¼Œç¤¾äº¤åˆ†äº« | `[videoId]/page.tsx` + `MuxPlayer` + `Comments` |
| **ğŸ“š è§†é¢‘æ’­æ”¾å™¨** | è‡ªé€‚åº”ç ç‡ï¼Œå…¨å±æ”¯æŒï¼Œæ’­æ”¾è¿›åº¦ï¼Œå­—å¹•æ”¯æŒï¼Œå¿«è¿›å¿«é€€ | `VideoPlayer` + `Mux SDK` + `useVideoProgress` |
| **ğŸ” æœç´¢æ¨¡å—** | å®æ—¶æœç´¢ï¼Œåˆ†ç±»è¿‡æ»¤ï¼Œå†å²è®°å½•ï¼Œæ™ºèƒ½å»ºè®®ï¼Œé«˜çº§ç­›é€‰ | `SearchView` + `useDebounce` + `SearchInput` |
| **ğŸ” è®¤è¯ç³»ç»Ÿ** | OAuth ç™»å½•ï¼Œå¤šå› ç´ è®¤è¯ï¼Œä¼šè¯ç®¡ç†ï¼Œæƒé™æ§åˆ¶ | `ClerkProvider` + `AuthButton` + `middleware` |
| **ğŸ¬ åˆ›ä½œè€…å·¥ä½œå®¤** | è§†é¢‘ä¸Šä¼ ï¼Œå…ƒæ•°æ®ç¼–è¾‘ï¼Œæ•°æ®åˆ†æï¼Œæ”¶ç›Šç»Ÿè®¡ï¼Œå†…å®¹ç®¡ç† | `StudioLayout` + `Uploader` + `VideoForm` |
| **ğŸ§­ è·¯ç”±ç³»ç»Ÿ** | åŠ¨æ€è·¯ç”±ï¼Œå‚æ•°ä¼ é€’ï¼Œä¸­é—´ä»¶ï¼Œé‡å®šå‘ï¼Œé”™è¯¯å¤„ç† | `Next.js App Router` + `middleware.ts` |

### âœ… åç«¯å®ç° (tRPC + Drizzle)

| æ¨¡å— | åŠŸèƒ½ç‰¹æ€§ | æŠ€æœ¯å®ç° |
|------|----------|----------|
| **ğŸ¥ è§†é¢‘ç®¡ç†** | CRUD æ“ä½œï¼Œæ–‡ä»¶ä¸Šä¼ ï¼Œå…ƒæ•°æ®å¤„ç†ï¼Œæƒé™éªŒè¯ï¼ŒçŠ¶æ€ç®¡ç† | `videosRouter` + `Mux API` + `UploadThing` |
| **ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ** | ç”¨æˆ·æ³¨å†Œï¼Œèµ„æ–™ç®¡ç†ï¼Œå¤´åƒä¸Šä¼ ï¼Œæƒé™æ§åˆ¶ï¼Œä¼šè¯ç®¡ç† | `usersRouter` + `Clerk Webhooks` + `JWT` |
| **ğŸ’¬ è¯„è®ºç³»ç»Ÿ** | è¯„è®º CRUDï¼Œå›å¤åµŒå¥—ï¼Œååº”ç»Ÿè®¡ï¼Œæ•æ„Ÿè¯è¿‡æ»¤ï¼Œå®æ—¶æ›´æ–° | `commentsRouter` + `PostgreSQL` + `WebSocket` |
| **ğŸ“Š æ•°æ®åˆ†æ** | æ’­æ”¾ç»Ÿè®¡ï¼Œç”¨æˆ·è¡Œä¸ºï¼Œå†…å®¹åˆ†æï¼Œæ”¶ç›Šè®¡ç®—ï¼ŒæŠ¥è¡¨ç”Ÿæˆ | `videoViewsRouter` + `Redis` + `Analytics` |
| **ğŸ” æœç´¢æœåŠ¡** | å…¨æ–‡æœç´¢ï¼Œåˆ†ç±»ç­›é€‰ï¼Œæ™ºèƒ½æ¨èï¼Œæœç´¢ä¼˜åŒ–ï¼Œç¼“å­˜ç­–ç•¥ | `searchRouter` + `PostgreSQL FTS` + `Redis` |
| **ğŸ“š æ’­æ”¾åˆ—è¡¨** | åˆ—è¡¨ç®¡ç†ï¼Œè§†é¢‘æ’åºï¼Œæƒé™æ§åˆ¶ï¼Œæ‰¹é‡æ“ä½œï¼Œåˆ†äº«åŠŸèƒ½ | `playlistsRouter` + `Many-to-Many` + `Permissions` |
| **ğŸ“ˆ æ¨èç®—æ³•** | ååŒè¿‡æ»¤ï¼Œå†…å®¹æ¨èï¼Œä¸ªæ€§åŒ–ï¼Œçƒ­é—¨è®¡ç®—ï¼Œå†·å¯åŠ¨å¤„ç† | `suggestionsRouter` + `ML Algorithm` + `Cache` |
| **ğŸ”” é€šçŸ¥ç³»ç»Ÿ** | å®æ—¶é€šçŸ¥ï¼Œé‚®ä»¶æé†’ï¼Œæ¨é€æ¶ˆæ¯ï¼Œè®¢é˜…ç®¡ç†ï¼Œåå¥½è®¾ç½® | `Upstash Workflow` + `Email Service` + `WebPush` |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### Frontend (Next.js)
```typescript
Next.js 15             // App Router + Server Components
React 19               // æœ€æ–°çš„ React ç‰¹æ€§å’Œ Hooks
TypeScript 5           // ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
Tailwind CSS 3         // åŸå­åŒ– CSS æ¡†æ¶
Radix UI              // æ— éšœç¢ç»„ä»¶åº“
Lucide React          // ç°ä»£ SVG å›¾æ ‡åº“
```

### Backend (tRPC + Drizzle)
```typescript
tRPC 11               // ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ API
Drizzle ORM 0.44      // ç±»å‹å®‰å…¨çš„ SQL ORM
Neon PostgreSQL       // æ— æœåŠ¡å™¨æ•°æ®åº“
Upstash Redis         // è¾¹ç¼˜ç¼“å­˜å’Œé™æµ
Zod 3.24              // è¿è¡Œæ—¶ç±»å‹éªŒè¯
```

### ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
```typescript
Clerk                 // ç”¨æˆ·è®¤è¯å’Œç®¡ç†
Mux                   // è§†é¢‘å¤„ç†å’Œæµåª’ä½“
UploadThing          // æ–‡ä»¶ä¸Šä¼ å’Œ CDN
OpenAI               // AI å†…å®¹ç”Ÿæˆ
Upstash Workflow     // åå°ä»»åŠ¡è°ƒåº¦
```

### æ¶æ„æ¨¡å¼
```
Modular Architecture      // åŠŸèƒ½æ¨¡å—ç‹¬ç«‹å°è£…
Server Components         // React Server Components
Type-Safe API            // tRPC ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
Database-First           // Drizzle Schema é©±åŠ¨
Edge-First Caching       // è¾¹ç¼˜ç¼“å­˜ä¼˜å…ˆ
```

## ğŸ“š æ¶æ„è¯¦è§£

### ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„è®¾è®¡

```typescript
src/
â”œâ”€â”€ app/                           # Next.js 15 App Router
â”‚   â”œâ”€â”€ (auth)/                   # è®¤è¯è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ sign-in/              # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ sign-up/              # æ³¨å†Œé¡µé¢  
â”‚   â”œâ”€â”€ (home)/                   # ä¸»åº”ç”¨è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ page.tsx              # é¦–é¡µ (SSR + ISR)
â”‚   â”‚   â”œâ”€â”€ videos/[videoId]/     # è§†é¢‘è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ search/               # æœç´¢é¡µé¢
â”‚   â”‚   â”œâ”€â”€ playlists/            # æ’­æ”¾åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ users/[userId]/       # ç”¨æˆ·ä¸»é¡µ
â”‚   â”œâ”€â”€ (studio)/                 # åˆ›ä½œè€…å·¥ä½œå®¤
â”‚   â”‚   â””â”€â”€ studio/               # å†…å®¹ç®¡ç†é¢æ¿
â”‚   â””â”€â”€ api/                      # API è·¯ç”±
â”‚       â”œâ”€â”€ trpc/[trpc]/          # tRPC API ç«¯ç‚¹
â”‚       â”œâ”€â”€ uploadthing/          # æ–‡ä»¶ä¸Šä¼ 
â”‚       â””â”€â”€ webhooks/             # ç¬¬ä¸‰æ–¹å›è°ƒ
â”œâ”€â”€ modules/                      # åŠŸèƒ½æ¨¡å— (é¢†åŸŸé©±åŠ¨)
â”‚   â”œâ”€â”€ videos/                   # è§†é¢‘æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ server/procedures.ts  # tRPC è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹
â”‚   â”‚   â””â”€â”€ ui/                   # React ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ components/       # åŸºç¡€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ sections/         # åŒºå—ç»„ä»¶
â”‚   â”‚       â””â”€â”€ views/            # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ auth/                     # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ users/                    # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ comments/                 # è¯„è®ºæ¨¡å—
â”‚   â”œâ”€â”€ playlists/                # æ’­æ”¾åˆ—è¡¨æ¨¡å—
â”‚   â””â”€â”€ subscriptions/            # è®¢é˜…æ¨¡å—
â”œâ”€â”€ db/                           # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ schema.ts                 # Drizzle Schema å®šä¹‰
â”‚   â””â”€â”€ index.ts                  # æ•°æ®åº“è¿æ¥é…ç½®
â”œâ”€â”€ lib/                          # å·¥å…·åº“
â”‚   â”œâ”€â”€ mux.ts                    # Mux è§†é¢‘æœåŠ¡
â”‚   â”œâ”€â”€ uploadthing.ts            # æ–‡ä»¶ä¸Šä¼ é…ç½®
â”‚   â”œâ”€â”€ redis.ts                  # Redis ç¼“å­˜
â”‚   â””â”€â”€ utils.ts                  # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ trpc/                         # tRPC é…ç½®
    â”œâ”€â”€ client.tsx                # å®¢æˆ·ç«¯é…ç½®
    â”œâ”€â”€ server.tsx                # æœåŠ¡ç«¯é…ç½®
    â””â”€â”€ routers/                  # è·¯ç”±èšåˆ
```

### ğŸ”„ tRPC ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨æ¶æ„

```typescript
// 1. æ•°æ®åº“ Schema (Drizzle)
export const videos = pgTable('videos', {
  id: uuid("id").primaryKey().defaultRandom(),
  title: text("title").notNull(),
  muxPlaybackId: text("mux_playback_id").unique(),
  // ... å…¶ä»–å­—æ®µ
})

// 2. æœåŠ¡ç«¯ Procedures (tRPC)
export const videosRouter = createTRPCRouter({
  getById: baseProcedure
    .input(z.object({ id: z.string().uuid() }))
    .query(async ({ input }) => {
      return await db.query.videos.findFirst({
        where: eq(videos.id, input.id)
      })
    }),
    
  create: protectedProcedure
    .input(videoInsertSchema)
    .mutation(async ({ input, ctx }) => {
      // åˆ›å»º Mux ä¸Šä¼  URL
      const upload = await mux.video.uploads.create({...})
      
      // æ’å…¥æ•°æ®åº“
      const [video] = await db.insert(videos)
        .values({ ...input, userId: ctx.user.id })
        .returning()
        
      return { video, uploadUrl: upload.url }
    })
})

// 3. å®¢æˆ·ç«¯è°ƒç”¨ (Type-Safe)
const { data: video, isLoading } = trpc.videos.getById.useQuery({
  id: videoId
})

const createVideo = trpc.videos.create.useMutation({
  onSuccess: (data) => {
    // data.video å’Œ data.uploadUrl éƒ½æ˜¯å®Œå…¨ç±»å‹åŒ–çš„
    router.push(`/studio/videos/${data.video.id}`)
  }
})
```

### ğŸ¯ æ¨¡å—åŒ–è®¾è®¡åŸåˆ™

```typescript
// æ¯ä¸ªæ¨¡å—éµå¾ªç»Ÿä¸€ç»“æ„:
module/
â”œâ”€â”€ server/
â”‚   â””â”€â”€ procedures.ts     // tRPC API å®šä¹‰
â”œâ”€â”€ types.ts              // å…±äº«ç±»å‹å®šä¹‰  
â”œâ”€â”€ constants.ts          // æ¨¡å—å¸¸é‡
â””â”€â”€ ui/
    â”œâ”€â”€ components/       // å¯å¤ç”¨ç»„ä»¶
    â”œâ”€â”€ sections/         // é¡µé¢åŒºå—
    â””â”€â”€ views/            // å®Œæ•´é¡µé¢è§†å›¾

// ç¤ºä¾‹: è§†é¢‘æ¨¡å—çš„ç±»å‹å®šä¹‰
export interface VideoWithUser {
  id: string
  title: string
  user: {
    id: string
    name: string
    imageUrl: string
  }
  // ... å…¶ä»–å­—æ®µä¼šè‡ªåŠ¨ä» Drizzle Schema æ¨å¯¼
}
```

### ğŸ“Š æ•°æ®æµæ¶æ„

```mermaid
graph TD
    A[ç”¨æˆ·äº¤äº’] --> B[React ç»„ä»¶]
    B --> C[tRPC Client]
    C --> D[tRPC Server]
    D --> E[Drizzle ORM]
    E --> F[PostgreSQL]
    
    G[ç¬¬ä¸‰æ–¹æœåŠ¡] --> H[Webhooks]
    H --> I[API Routes]
    I --> E
    
    J[æ–‡ä»¶ä¸Šä¼ ] --> K[UploadThing]
    K --> L[Mux Processing]
    L --> H
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** >= 18.0
- **pnpm/npm/yarn** åŒ…ç®¡ç†å™¨
- **PostgreSQL** >= 14

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/new-tube.git
cd new-tube

# å®‰è£…ä¾èµ– (æ¨èä½¿ç”¨ pnpm)
pnpm install
# æˆ–ä½¿ç”¨ npm
npm install
```

### ç¯å¢ƒé…ç½®

1. **å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿**
```bash
cp .env.example .env.local
```

2. **é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡**
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://user:password@localhost:5432/newtube"

# Clerk ç”¨æˆ·è®¤è¯
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_xxx"
CLERK_SECRET_KEY="sk_test_xxx"
CLERK_WEBHOOK_SECRET="whsec_xxx"

# Mux è§†é¢‘æœåŠ¡
MUX_TOKEN_ID="your_mux_token_id"
MUX_TOKEN_SECRET="your_mux_token_secret"
MUX_WEBHOOK_SECRET="your_mux_webhook_secret"

# UploadThing æ–‡ä»¶ä¸Šä¼ 
UPLOADTHING_SECRET="sk_live_xxx"
UPLOADTHING_APP_ID="your_app_id"

# Upstash Redis ç¼“å­˜
UPSTASH_REDIS_REST_URL="https://xxx.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your_redis_token"

# OpenAI (å¯é€‰)
OPENAI_API_KEY="sk-xxx"

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL="http://localhost:3000"
```

### æ•°æ®åº“è®¾ç½®

```bash
# æ¨é€ schema åˆ°æ•°æ®åº“
pnpm db:push

# è¿è¡Œæ•°æ®è¿ç§»
pnpm db:migrate

# ç§å­æ•°æ® (å¯é€‰)
pnpm db:seed
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æˆ–åˆ†åˆ«å¯åŠ¨ä¸åŒæœåŠ¡
pnpm dev:next    # Next.js åº”ç”¨
pnpm dev:studio  # Drizzle Studio æ•°æ®åº“ç®¡ç†
```

è®¿é—®åº”ç”¨ï¼š
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **æ•°æ®åº“ç®¡ç†**: http://localhost:4983 (Drizzle Studio)

### ç”Ÿäº§éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# æˆ–éƒ¨ç½²åˆ° Vercel (æ¨è)
npx vercel --prod
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### Next.js æ€§èƒ½

- âœ… **App Router + RSC** - Server Components å‡å°‘å®¢æˆ·ç«¯ JavaScriptï¼Œé¦–å±æ¸²æŸ“æå‡ 40%
- âœ… **ISR + Edge Caching** - å¢é‡é™æ€å†ç”Ÿ + Vercel Edgeï¼Œé¡µé¢å“åº”æ—¶é—´ < 100ms
- âœ… **Bundle ä¼˜åŒ–** - Tree Shaking + Code Splittingï¼ŒJavaScript åŒ…ä½“ç§¯å‡å°‘ 35%

### è§†é¢‘ & åª’ä½“

- âœ… **Mux è‡ªé€‚åº”æµ** - å¤šç ç‡è‡ªåŠ¨åˆ‡æ¢ï¼Œé€‚é…ä¸åŒç½‘ç»œç¯å¢ƒï¼Œæ’­æ”¾å¡é¡¿ç‡ < 0.5%
- âœ… **æ™ºèƒ½é¢„åŠ è½½** - åŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹ï¼Œé¢„åŠ è½½ä¸‹ä¸€ä¸ªè§†é¢‘ï¼Œæ’­æ”¾å»¶è¿Ÿå‡å°‘ 60%
- âœ… **å›¾ç‰‡ä¼˜åŒ–** - Next.js Image + WebP/AVIFï¼ŒåŠ è½½é€Ÿåº¦æå‡ 50%
- âœ… **CDN åˆ†å‘** - UploadThing å…¨çƒ CDNï¼Œå¹³å‡å“åº”æ—¶é—´ < 50ms

### æ•°æ®åº“ & ç¼“å­˜

- âœ… **è¿æ¥æ± ä¼˜åŒ–** - Neon Serverlessï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œ0 å†·å¯åŠ¨å»¶è¿Ÿ
- âœ… **æŸ¥è¯¢ä¼˜åŒ–** - Drizzle æŸ¥è¯¢åˆ†æï¼ŒN+1 é—®é¢˜è§£å†³ï¼Œæ•°æ®åº“å“åº”æ—¶é—´ < 20ms
- âœ… **è¾¹ç¼˜ç¼“å­˜** - Upstash Redisï¼Œ95% ç¼“å­˜å‘½ä¸­ç‡ï¼Œæ•°æ®ä¸€è‡´æ€§ä¿è¯
- âœ… **æ•°æ®é¢„å–** - tRPC Prefetchï¼Œå…³é”®æ•°æ®é¢„å–ï¼Œç”¨æˆ·æ„ŸçŸ¥å»¶è¿Ÿ < 100ms

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ |
|------|--------|--------|
| é¦–å±æ¸²æŸ“ (FCP) | < 1.5s | 1.2s âœ… |
| æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP) | < 2.5s | 2.1s âœ… |
| ç´¯è®¡å¸ƒå±€åç§» (CLS) | < 0.1 | 0.05 âœ… |
| é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (FID) | < 100ms | 85ms âœ… |
| è§†é¢‘å¯æ’­æ—¶é—´ | < 2s | 1.8s âœ… |
| API å“åº”æ—¶é—´ | < 200ms | 150ms âœ… |
| ç¼“å­˜å‘½ä¸­ç‡ | > 90% | 95% âœ… |
| é”™è¯¯ç‡ | < 0.1% | 0.05% âœ… |

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–

```bash
# å•å…ƒæµ‹è¯• (Jest + Testing Library)
pnpm test

# é›†æˆæµ‹è¯• (Playwright)
pnpm test:e2e

# ç±»å‹æ£€æŸ¥
pnpm type-check

# ä»£ç è´¨é‡æ£€æŸ¥
pnpm lint
pnpm lint:fix
```

### è´¨é‡é—¨ç¦

| ç±»å‹ | å·¥å…· | é˜ˆå€¼ |
|------|------|------|
| å•å…ƒæµ‹è¯• | Jest + RTL | è¦†ç›–ç‡ > 80% |
| E2E æµ‹è¯• | Playwright | å…³é”®è·¯å¾„ 100% è¦†ç›– |
| ç±»å‹æ£€æŸ¥ | TypeScript | 0 ç±»å‹é”™è¯¯ |
| ä»£ç è´¨é‡ | ESLint + Prettier | 0 é”™è¯¯è­¦å‘Š |
| æ€§èƒ½æµ‹è¯• | Lighthouse CI | Performance Score > 90 |

## ğŸ”§ å¼€å‘æŒ‡å—

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘ç¯å¢ƒ
pnpm dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev:turbo        # Turbo æ¨¡å¼ (æ›´å¿«çš„çƒ­é‡è½½)

# æ„å»ºå’Œéƒ¨ç½²
pnpm build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start            # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm analyze          # åˆ†æ Bundle å¤§å°

# æ•°æ®åº“ç®¡ç†
pnpm db:push          # æ¨é€ schema åˆ°æ•°æ®åº“
pnpm db:studio        # æ‰“å¼€ Drizzle Studio
pnpm db:migrate       # è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm db:seed          # è¿è¡Œç§å­æ•°æ®

# ä»£ç è´¨é‡
pnpm lint             # ESLint æ£€æŸ¥
pnpm lint:fix         # è‡ªåŠ¨ä¿®å¤ ESLint é”™è¯¯
pnpm type-check       # TypeScript ç±»å‹æ£€æŸ¥
pnpm format           # Prettier æ ¼å¼åŒ–

# æµ‹è¯•
pnpm test             # è¿è¡Œå•å…ƒæµ‹è¯•
pnpm test:watch       # ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:e2e         # è¿è¡Œ E2E æµ‹è¯•
```

### ä»£ç è§„èŒƒ

```typescript
// 1. ç»„ä»¶å‘½å: PascalCase
export const VideoPlayer = () => { ... }

// 2. æ–‡ä»¶å‘½å: kebab-case
video-player.tsx
user-profile.tsx

// 3. tRPC Procedures: camelCase
export const videosRouter = createTRPCRouter({
  getById: baseProcedure...,
  updateMetadata: protectedProcedure...,
})

// 4. æ•°æ®åº“è¡¨: snake_case
export const video_reactions = pgTable('video_reactions', {
  user_id: uuid('user_id'),
  video_id: uuid('video_id'),
})

// 5. ç¯å¢ƒå˜é‡: SCREAMING_SNAKE_CASE
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
MUX_TOKEN_SECRET
```

### æ¶æ„åŸåˆ™

- **å•ä¸€èŒè´£** - æ¯ä¸ªç»„ä»¶/å‡½æ•°åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- **ä¾èµ–å€’ç½®** - ä¾èµ–æŠ½è±¡æ¥å£è€Œéå…·ä½“å®ç°
- **å¼€é—­åŸåˆ™** - å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **ç±»å‹å®‰å…¨** - ä»æ•°æ®åº“åˆ°å‰ç«¯çš„å®Œæ•´ç±»å‹æ¨å¯¼

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- æäº¤ä¿¡æ¯ä½¿ç”¨ [Conventional Commits](https://conventionalcommits.org/) è§„èŒƒ
- ä»£ç å¿…é¡»é€šè¿‡ ESLint æ£€æŸ¥
- æ–°åŠŸèƒ½éœ€è¦åŒ…å«ç›¸åº”çš„æµ‹è¯•
- æ›´æ–°æ–‡æ¡£è¯´æ˜æ–°å¢åŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ç»´æŠ¤è€…**: [Your Name]
- **Email**: your.email@example.com
- **é¡¹ç›®ä¸»é¡µ**: https://github.com/your-username/new-tube

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [Next.js](https://nextjs.org/) - The React Framework
- [Clerk](https://clerk.dev/) - User Authentication
- [Mux](https://mux.com/) - Video Infrastructure
- [Drizzle ORM](https://orm.drizzle.team/) - TypeScript ORM
- [tRPC](https://trpc.io/) - End-to-end typesafe APIs
- [Tailwind CSS](https://tailwindcss.com/) - Utility-first CSS framework
- [Radix UI](https://radix-ui.com/) - Low-level UI primitives

---

<div align="center">
  <p>â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª starï¼</p>

  <!-- é¡¹ç›®çŠ¶æ€å¾½ç« é¢„ç•™ -->
  ![GitHub stars](https://img.shields.io/github/stars/your-username/new-tube)
  ![GitHub forks](https://img.shields.io/github/forks/your-username/new-tube)
  ![GitHub issues](https://img.shields.io/github/issues/your-username/new-tube)
  ![GitHub license](https://img.shields.io/github/license/your-username/new-tube)
</div>